{
  "$schema": "https://github.com/qwc-services/qwc-map-viewer/raw/2024-lts/schemas/qwc-map-viewer.json",
  "service": "map-viewer",
  "config": {
    "qwc2_path": "/qwc2/",
    "auth_service_url": "/trdc/auth/",
    "data_service_url": "/trdc/api/v1/data/",
    "#document_service_url": "/trdc/api/v1/document/",
    "info_service_url": "/trdc/api/v1/featureinfo/",
    "legend_service_url": "/trdc/api/v1/legend/",
    "mapinfo_service_url": "/trdc/api/v1/mapinfo/",
    "ogc_service_url": "/trdc/ows/",
    "permalink_service_url": "/trdc/api/v1/permalink/",
    "#print_service_url": "/trdc/api/v1/print/",
    "search_service_url": "/trdc/api/v2/search/",
    "search_data_service_url": "/trdc/api/v2/search/geom/"
  },
  "resources": {
    "qwc2_config": {
      "restricted_viewer_tasks": [],
      "config": {
        "assetsPath": "assets/trdc",
        "urlPositionFormat": "centerAndZoom",
        "urlPositionCrs": "",
        "omitUrlParameterUpdates": false,
        "preserveExtentOnThemeSwitch": true,
        "preserveBackgroundOnThemeSwitch": true,
        "preserveNonThemeLayersOnThemeSwitch": false,
        "allowReorderingLayers": true,
        "preventSplittingGroupsWhenReordering": false,
        "allowLayerTreeSeparators": false,
        "allowRemovingThemeLayers": true,
        "globallyDisableDockableDialogs": false,
        "searchThemes": true,
        "allowAddingOtherThemes": false,
        "allowFractionalZoom": false,
        "localeAwareNumbers": false,
        "identifyTool": "Identify",
        "wmsDpi": 96,
        "wmsHidpi": false,
        "qgisServerVersion": 3,
        "defaultFeatureStyle": {
          "strokeColor": [
            0,
            0,
            255,
            1
          ],
          "strokeWidth": 1,
          "strokeDash": [
            4
          ],
          "fillColor": [
            255,
            0,
            255,
            0.33
          ],
          "circleRadius": 10,
          "textFill": "black",
          "textStroke": "white",
          "textFont": "11pt sans-serif"
        },
        "projections": [
          {
            "code": "EPSG:27700",
            "proj": "+proj=tmerc +lat_0=49 +lon_0=-2 +k=0.9996012717 +x_0=400000 +y_0=-100000 +ellps=airy +units=m +no_defs",
            "label": "OSGB 1936 / British National Grid"
          },
          {
            "code": "EPSG:3857",
            "proj": "+proj=merc +a=6378137 +b=6378137 +lat_ts=0 +lon_0=0 +x_0=0 +y_0=0 +k=1 +units=m +nadgrids=@null +wktext +no_defs",
            "label": "WGS 84 / Pseudo-Mercator"
          }
        ],
        "plugins": {
          "mobile": [
            {
              "name": "Map",
              "cfg": {
                "mapOptions": {
                  "zoomDuration": 250,
                  "enableRotation": true
                },
                "toolsOptions": {
                  "OverviewSupport": {
                    "tipLabel": "Overview"
                  },
                  "LocateSupport": {
                    "keepCurrentZoomLevel": true,
                    "startupMode": "DISABLED"
                  },
                  "ScaleBarSupport": {
                    "units": "metric"
                  }
                }
              }
            },
            {
              "name": "HomeButton",
              "cfg": {
                "position": 2
              }
            },
            {
              "name": "LocateButton",
              "cfg": {
                "position": 1
              }
            },
            {
              "name": "BackgroundSwitcher",
              "cfg": {
                "position": 0
              }
            },
            {
              "name": "TopBar",
              "cfg": {
                "menuItems": [
                  {
                    "key": "ThemeSwitcher",
                    "icon": "themes"
                  },
                  {
                    "key": "LayerTree",
                    "icon": "layers"
                  },
                  {
                    "key": "FeatureSearch",
                    "icon": "search"
                  },
                  {
                    "key": "Share",
                    "icon": "share"
                  },
                  {
                    "key": "Tools",
                    "icon": "tools",
                    "subitems": [
                      {
                        "key": "Measure",
                        "icon": "measure"
                      },
                      {
                        "key": "FeatureForm",
                        "icon": "featureform"
                      },
                      {
                        "key": "AttributeTable",
                        "icon": "editing"
                      }
                    ]
                  },
                  {
                    "key": "Print",
                    "icon": "print"
                  },
                  {
                    "key": "Help",
                    "icon": "info"
                  },
                  {
                    "key": "Settings",
                    "icon": "cog"
                  },
                  {
                    "key": "Login",
                    "icon": "login"
                  }
                ],
                "searchOptions": {
                  "minScaleDenom": 1000,
                  "showProviderSelection": true,
                  "providerSelectionAllowAll": true,
                  "zoomToLayers": false,
                  "showProvidersInPlaceholder": false
                },
                "appMenuClearsTask": true,
                "appMenuFilterField": true,
                "appMenuVisibleOnStartup": false
              }
            },
            {
              "name": "ThemeSwitcher",
              "cfg": {
                "collapsibleGroups": true
              }
            },
            {
              "name": "Measure",
              "cfg": {
                "showMeasureModeSwitcher": true
              }
            },
            {
              "name": "BottomBar",
              "cfg": {
                "displayCoordinates": false,
                "displayScales": false
              }
            },
            {
              "name": "Identify",
              "cfg": {
                "params": {
                  "FI_POINT_TOLERANCE": 32,
                  "FI_LINE_TOLERANCE": 16,
                  "FI_POLYGON_TOLERANCE": 8,
                  "feature_count": 20,
                  "region_feature_count": 100
                },
                "enableExport": true,
                "longAttributesDisplay": "wrap",
                "displayResultTree": false,
                "featureInfoReturnsLayerName": true
              }
            },
            {
              "name": "Share",
              "cfg": {
                "showSocials": true,
                "showLink": true,
                "showQRCode": true
              },
              "mapClickAction": "identify"
            },
            {
              "name": "Print",
              "cfg": {
                "inlinePrintOutput": false,
                "printExternalLayers": true,
                "gridInitiallyEnabled": false
              }
            },
            {
              "name": "Help",
              "mapClickAction": "identify"
            },
            {
              "name": "MapCopyright"
            },
            {
              "name": "LayerTree",
              "cfg": {
                "showLegendIcons": true,
                "showRootEntry": true,
                "showQueryableIcon": true,
                "allowMapTips": true,
                "allowCompare": true,
                "allowImport": true,
                "groupTogglesSublayers": false,
                "grayUnchecked": false,
                "layerInfoWindowSize": {
                  "width": 480,
                  "height": 400
                },
                "bboxDependentLegend": true,
                "scaleDependentLegend": "theme"
              },
              "mapClickAction": "unset"
            },
            {
              "name": "AttributeTable"
            },
            {
              "name": "MapCompare"
            },
            {
              "name": "MapInfoTooltip",
              "cfg": {
                "includeWGS84": false
              }
            },
            {
              "name": "StartupMarker",
              "cfg": {
                "removeMode": "onclickonmarker"
              }
            },
            {
              "name": "Authentication"
            },
            {
              "name": "FeatureForm"
            },
            {
              "name": "Settings",
              "cfg": {
                "languages": [
                  {
                    "title": "English",
                    "value": "en-GB"
                  },
                  {
                    "title": "French",
                    "value": "fr-FR"
                  }
                ],
                "colorSchemes": [
                  {
                    "titleMsgId": "colorschemes.default",
                    "value": "default"
                  },
                  {
                    "titleMsgId": "colorschemes.highcontrast",
                    "value": "highcontrast"
                  },
                  {
                    "titleMsgId": "colorschemes.dark",
                    "value": "dark"
                  }
                ]
              }
            }
          ],
          "desktop": [
            {
              "name": "Map",
              "cfg": {
                "mapOptions": {
                  "zoomDuration": 250,
                  "enableRotation": true
                },
                "toolsOptions": {
                  "OverviewSupport": {
                    "tipLabel": "Overview"
                  },
                  "LocateSupport": {
                    "keepCurrentZoomLevel": true,
                    "stopFollowingOnDrag": true,
                    "startupMode": "DISABLED"
                  },
                  "ScaleBarSupport": {
                    "units": "metric"
                  }
                },
                "swipeGeometryTypeBlacklist": [],
                "swipeLayerNameBlacklist": []
              }
            },
            {
              "name": "TaskButton",
              "cfg": {
                "position": 5,
                "task": "LayerTree",
                "icon": "list-alt"
              }
            },
            {
              "name": "HomeButton",
              "cfg": {
                "position": 4
              }
            },
            {
              "name": "ZoomIn",
              "cfg": {
                "position": 2
              }
            },
            {
              "name": "ZoomOut",
              "cfg": {
                "position": 1
              }
            },
            {
              "name": "BackgroundSwitcher",
              "cfg": {
                "position": 0
              }
            },
            {
              "name": "TopBar",
              "cfg": {
                "menuItems": [
                  {
                    "key": "ThemeSwitcher",
                    "icon": "themes"
                  },
                  {
                    "key": "LayerTree",
                    "icon": "layers"
                  },
                  {
                    "key": "FeatureSearch",
                    "icon": "search"
                  },
                  {
                    "key": "Share",
                    "icon": "share"
                  },
                  {
                    "key": "Tools",
                    "icon": "tools",
                    "subitems": [
                      {
                        "key": "Identify",
                        "icon": "identify_region",
                        "mode": "Region"
                      },
                      {
                        "key": "Measure",
                        "icon": "measure"
                      },
                      {
                        "key": "FeatureForm",
                        "icon": "featureform"
                      },
                      {
                        "key": "AttributeTable",
                        "icon": "editing"
                      }
                    ]
                  },
                  {
                    "key": "Print",
                    "icon": "print"
                  },
                  {
                    "key": "Help",
                    "icon": "info"
                  },
                  {
                    "key": "Settings",
                    "icon": "cog"
                  },
                  {
                    "key": "Login",
                    "icon": "login"
                  }
                ],
                "toolbarItems": [
                  {
                    "key": "Measure",
                    "mode": "LineString",
                    "icon": "measure_line"
                  }
                ],
                "searchOptions": {
                  "minScaleDenom": 1000,
                  "zoomToLayers": false,
                  "allowSearchFilters": true,
                  "showProvidersInPlaceholder": true
                },
                "appMenuClearsTask": true,
                "appMenuFilterField": true,
                "appMenuVisibleOnStartup": false,
                "logoUrl": "http://www.threerivers.gov.uk"
              }
            },
            {
              "name": "BottomBar",
              "cfg": {}
            },
            {
              "name": "Measure",
              "cfg": {
                "showMeasureModeSwitcher": true,
                "snapping": true,
                "snappingActive": true
              }
            },
            {
              "name": "ThemeSwitcher",
              "cfg": {
                "collapsibleGroups": true
              }
            },
            {
              "name": "LayerTree",
              "cfg": {
                "showLegendIcons": true,
                "showRootEntry": true,
                "showQueryableIcon": true,
                "allowMapTips": true,
                "allowCompare": true,
                "allowImport": true,
                "groupTogglesSublayers": false,
                "grayUnchecked": false,
                "layerInfoWindowSize": {
                  "width": 480,
                  "height": 400
                },
                "bboxDependentLegend": true,
                "scaleDependentLegend": "theme",
                "showToggleAllLayersCheckbox": true
              },
              "mapClickAction": "identify"
            },
            {
              "name": "Identify",
              "cfg": {
                "params": {
                  "FI_POINT_TOLERANCE": 16,
                  "FI_LINE_TOLERANCE": 8,
                  "FI_POLYGON_TOLERANCE": 4,
                  "feature_count": 20,
                  "region_feature_count": 100
                },
                "enableExport": true,
                "longAttributesDisplay": "wrap",
                "displayResultTree": false,
                "featureInfoReturnsLayerName": true,
                "initialWidth": 480,
                "initialHeight": 550
              }
            },
            {
              "name": "MapTip"
            },
            {
              "name": "Share",
              "cfg": {
                "showSocials": true,
                "showLink": true,
                "showQRCode": true
              },
              "mapClickAction": "identify"
            },
            {
              "name": "Print",
              "cfg": {
                "inlinePrintOutput": true,
                "printExternalLayers": true,
                "gridInitiallyEnabled": false
              }
            },
            {
              "name": "Help",
              "mapClickAction": "identify",
              "cfg": {
                "bodyContentsFragmentUrl": "assets/trdc/help.html"
              }
            },
            {
              "name": "MapCopyright",
              "cfg": {
                "showThemeCopyrightOnly": true
              }
            },
            {
              "name": "DxfExport",
              "cfg": {}
            },
            {
              "name": "RasterExport",
              "cfg": {
                "dpis": [
                  96,
                  300
                ],
                "exportExternalLayers": true
              }
            },
            {
              "name": "Redlining",
              "cfg": {
                "snapping": true,
                "snappingActive": true
              }
            },
            {
              "name": "Editing",
              "cfg": {
                "snapping": true,
                "snappingActive": true
              }
            },
            {
              "name": "MapCompare"
            },
            {
              "name": "HeightProfile",
              "cfg": {
                "heighProfilePrecision": 0
              }
            },
            {
              "name": "MapInfoTooltip",
              "cfg": {
                "includeWGS84": false
              }
            },
            {
              "name": "StartupMarker",
              "cfg": {
                "removeMode": "onclickonmarker"
              }
            },
            {
              "name": "API"
            },
            {
              "name": "ScratchDrawing"
            },
            {
              "name": "LayerCatalog",
              "cfg": {
                "catalogUrl": "http://localhost/catalog.json"
              }
            },
            {
              "name": "Bookmark"
            },
            {
              "name": "AttributeTable"
            },
            {
              "name": "Authentication"
            },
            {
              "name": "FeatureForm"
            },
            {
              "name": "TimeManager",
              "mapClickAction": "identify"
            },
            {
              "name": "Settings",
              "cfg": {
                "languages": [
                  {
                    "title": "English",
                    "value": "en-UK"
                  },
                  {
                    "title": "French",
                    "value": "fr-FR"
                  }
                ],
                "colorSchemes": [
                  {
                    "titleMsgId": "colorschemes.default",
                    "value": "default"
                  },
                  {
                    "titleMsgId": "colorschemes.highcontrast",
                    "value": "highcontrast"
                  },
                  {
                    "titleMsgId": "colorschemes.dark",
                    "value": "dark"
                  }
                ]
              }
            }
          ]
        }
      }
    },
    "qwc2_themes": {
      "themes": {
        "title": "root",
        "items": [
          {
            "id": "threeRivers",
            "name": "trdc/scan/threerivers",
            "title": "Three Rivers District Council Traffic Orders",
            "description": "",
            "wmsOnly": false,
            "wms_name": "trdc/scan/threerivers",
            "url": "/trdc/ows/trdc/scan/threerivers",
            "attribution": {
              "Title": "TRDC Demo attribution",
              "OnlineResource": "https://127.0.0.1/"
            },
            "abstract": "",
            "keywords": "",
            "onlineResource": "",
            "contact": {
              "person": "Ian Bratt",
              "organization": "Three Rivers District Council",
              "position": null,
              "phone": null,
              "email": "ian dot bratt at threerivers dot gov dot uk"
            },
            "mapCrs": "EPSG:27700",
            "additionalMouseCrs": [],
            "bbox": {
              "crs": "EPSG:4326",
              "bounds": [
                -1.01968,
                51.586468,
                0.122116,
                51.750865
              ]
            },
            "initialBbox": {
              "crs": "EPSG:4326",
              "bounds": [
                -1.01968,
                51.586468,
                0.122116,
                51.750865
              ]
            },
            "sublayers": [
              {
                "name": "Restrictions",
                "title": "Restrictions",
                "sublayers": [
                  {
                    "name": "Bays",
                    "title": "Bays",
                    "visibility": true,
                    "geometryType": "LineString",
                    "queryable": true,
                    "styles": {
                      "default": "default"
                    },
                    "style": "default",
                    "displayField": "RestrictionTypeID",
                    "opacity": 255,
                    "bbox": {
                      "crs": "EPSG:4326",
                      "bounds": [
                        -0.531612,
                        51.611348,
                        -0.372907,
                        51.723342
                      ]
                    },
                    "dimensions": [],
                    "attribution": {
                      "Title": null,
                      "OnlineResource": null
                    }
                  },
                  {
                    "name": "Lines",
                    "title": "Lines",
                    "visibility": true,
                    "geometryType": "LineString",
                    "queryable": true,
                    "styles": {
                      "default": "default"
                    },
                    "style": "default",
                    "displayField": "RestrictionTypeID",
                    "opacity": 255,
                    "bbox": {
                      "crs": "EPSG:4326",
                      "bounds": [
                        -0.537011,
                        51.609812,
                        -0.365158,
                        51.727613
                      ]
                    },
                    "dimensions": [],
                    "attribution": {
                      "Title": null,
                      "OnlineResource": null
                    }
                  },
                  {
                    "name": "RestrictionPolygons",
                    "title": "RestrictionPolygons",
                    "visibility": true,
                    "geometryType": "Polygon",
                    "queryable": true,
                    "styles": {
                      "default": "default"
                    },
                    "style": "default",
                    "displayField": "maptip",
                    "opacity": 255,
                    "bbox": {
                      "crs": "EPSG:4326",
                      "bounds": [
                        -0.537176,
                        51.620466,
                        -0.383998,
                        51.711768
                      ]
                    },
                    "dimensions": [],
                    "attribution": {
                      "Title": null,
                      "OnlineResource": null
                    }
                  },
                  {
                    "name": "CarParks",
                    "title": "CarParks",
                    "visibility": true,
                    "geometryType": "Polygon",
                    "queryable": true,
                    "styles": {
                      "default": "default"
                    },
                    "style": "default",
                    "displayField": "Name",
                    "opacity": 255,
                    "bbox": {
                      "crs": "EPSG:4326",
                      "bounds": [
                        -0.522271,
                        51.621701,
                        -0.383438,
                        51.707758
                      ]
                    },
                    "dimensions": [],
                    "attribution": {
                      "Title": null,
                      "OnlineResource": null
                    }
                  }
                ],
                "expanded": true,
                "mutuallyExclusive": false,
                "visibility": true
              },
              {
                "name": "Map Schedule Grids",
                "title": "Map Schedule Grids",
                "sublayers": [
                  {
                    "name": "MapGrid",
                    "title": "MapGrid",
                    "visibility": true,
                    "geometryType": "MultiPolygon",
                    "queryable": false,
                    "styles": {
                      "default": "default"
                    },
                    "style": "default",
                    "opacity": 255,
                    "bbox": {
                      "crs": "EPSG:4326",
                      "bounds": [
                        -0.541717,
                        51.596522,
                        -0.357567,
                        51.7427
                      ]
                    },
                    "minScale": 5000,
                    "maxScale": 35000,
                    "dimensions": [],
                    "attribution": {
                      "Title": null,
                      "OnlineResource": null
                    }
                  }
                ],
                "expanded": true,
                "mutuallyExclusive": false,
                "visibility": true
              },
              {
                "name": "Background Mapping",
                "title": "Background Mapping",
                "sublayers": [
                  {
                    "name": "StreetGazetteerRecords",
                    "title": "StreetGazetteerRecords",
                    "visibility": true,
                    "geometryType": "MultiLineString",
                    "queryable": false,
                    "styles": {
                      "default": "default"
                    },
                    "style": "default",
                    "opacity": 255,
                    "bbox": {
                      "crs": "EPSG:4326",
                      "bounds": [
                        -0.541688,
                        51.558505,
                        -0.358429,
                        51.742355
                      ]
                    },
                    "minScale": 0,
                    "maxScale": 5000,
                    "dimensions": [],
                    "attribution": {
                      "Title": null,
                      "OnlineResource": null
                    }
                  },
                  {
                    "name": "TRDC",
                    "title": "Three Rivers District Council",
                    "visibility": true,
                    "geometryType": "MultiPolygon",
                    "queryable": true,
                    "styles": {
                      "default": "default"
                    },
                    "style": "default",
                    "displayField": "name",
                    "opacity": 255,
                    "bbox": {
                      "crs": "EPSG:4326",
                      "bounds": [
                        -0.540483,
                        51.597681,
                        -0.35839,
                        51.742311
                      ]
                    },
                    "dimensions": [],
                    "attribution": {
                      "Title": null,
                      "OnlineResource": null
                    }
                  },
                  {
                    "name": "OS_Roads",
                    "title": "OS_Roads",
                    "visibility": true,
                    "geometryType": null,
                    "queryable": true,
                    "styles": {
                      "default": "default"
                    },
                    "style": "default",
                    "opacity": 255,
                    "bbox": {
                      "crs": "EPSG:4326",
                      "bounds": [
                        -14.132436,
                        49.561403,
                        7.551553,
                        62.266073
                      ]
                    },
                    "dimensions": [],
                    "attribution": {
                      "Title": null,
                      "OnlineResource": null
                    }
                  }
                ],
                "expanded": true,
                "mutuallyExclusive": false,
                "visibility": true
              }
            ],
            "expanded": true,
            "drawingOrder": [
              "OS_Roads",
              "TRDC",
              "StreetGazetteerRecords",
              "MapGrid",
              "ParkingTariffAreas",
              "MatchDayEventDayZones",
              "CPZs",
              "Bays_Export",
              "Lines_Export",
              "CarParks",
              "RestrictionPolygons",
              "Lines",
              "Bays"
            ],
            "externalLayers": [],
            "backgroundLayers": [
              {
                "name": "mapnik",
                "printLayer": "osm_bg"
              }
            ],
            "print": [
              {
                "name": "A4_Sketch",
                "map": {
                  "name": "map0",
                  "width": 411.3,
                  "height": 265.0110644325587
                },
                "default": false
              }
            ],
            "skipEmptyFeatureAttributes": true,
            "searchProviders": [
              {
                "provider": "qgis",
                "params": {
                  "title": "trdc_qgis_search",
                  "expression": {
                    "StreetGazetteerRecords": "\"SITE_NAME\" ILIKE '%$ROAD$%' AND \"TOWN\" ILIKE '%$LOCALITY%'"
                  },
                  "fields": {
                    "ROAD": {
                      "label": "Road name",
                      "type": "text"
                    },
                    "LOCALITY": {
                      "label": "Locality",
                      "type": "text"
                    }
                  }
                }
              },
              {
                "provider": "solr",
                "default": [
                  "trdc_road_name"
                ]
              }
            ],
            "editConfig": {},
            "thumbnail": "img/mapthumbs/threerivers.png",
            "availableFormats": [
              "image/jpeg",
              "image/png",
              "image/png; mode=16bit",
              "image/png; mode=8bit",
              "image/png; mode=1bit",
              "application/dxf"
            ],
            "infoFormats": [
              "text/plain",
              "text/html",
              "text/xml",
              "application/vnd.ogc.gml",
              "application/vnd.ogc.gml/3.1.1",
              "application/json",
              "application/geo+json"
            ],
            "printResolutions": [
              300
            ]
          }
        ],
        "subdirs": [],
        "defaultTheme": "threeRivers",
        "externalLayers": [],
        "backgroundLayers": [
          {
            "name": "mapnik",
            "title": "Open Street Map",
            "type": "osm",
            "source": "osm",
            "attribution": {
              "Title": "OpenStreetMap contributors",
              "OnlineResource": "https://www.openstreetmap.org/copyright"
            },
            "thumbnail": "img/mapthumbs/mapnik.jpg"
          }
        ],
        "pluginData": {},
        "themeInfoLinks": [],
        "defaultMapCrs": "EPSG:27700",
        "defaultWMSVersion": "1.3.0",
        "defaultScales": [
          100000,
          50000,
          25000,
          10000,
          7500,
          5000,
          2500,
          1000,
          500,
          250,
          100
        ],
        "defaultPrintScales": null,
        "defaultPrintResolutions": null,
        "defaultPrintGrid": [
          {
            "s": 10000000,
            "x": 1000000,
            "y": 1000000
          },
          {
            "s": 1000000,
            "x": 100000,
            "y": 100000
          },
          {
            "s": 100000,
            "x": 10000,
            "y": 10000
          },
          {
            "s": 10000,
            "x": 1000,
            "y": 1000
          },
          {
            "s": 1000,
            "x": 100,
            "y": 100
          },
          {
            "s": 100,
            "x": 10,
            "y": 10
          }
        ],
        "defaultSearchProviders": [
          "qgis"
        ],
        "defaultBackgroundLayers": []
      }
    }
  }
}